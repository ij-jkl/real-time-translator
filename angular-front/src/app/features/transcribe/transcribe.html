<main class="container">
  <header class="header">
    <h1>🎤 Transcripción en Tiempo Real</h1>
  </header>

  <section class="status-bar" aria-label="Estado de la transcripción">
    <div class="status-grid">
      <div class="status-item" *ngFor="let s of statusList">
        <div
          class="status-indicator"
          [class.connected]="s.connected"
          [attr.aria-label]="s.ariaLabel"
          role="status"
        ></div>
        <span class="status-text">{{ s.text }}</span>
      </div>
    </div>
  </section>

  <nav class="controls" aria-label="Controles">
    <button class="btn btn-primary"
            (click)="connect()"
            [disabled]="status().websocket === 'connected'"
            aria-label="Conectar WebSocket"
            [attr.aria-pressed]="status().websocket === 'connected'">
      Conectar WebSocket
    </button>
    <button class="btn btn-danger"
            (click)="disconnect()"
            [disabled]="status().websocket !== 'connected'"
            aria-label="Desconectar WebSocket"
            [attr.aria-pressed]="status().websocket !== 'connected'">
      Desconectar
    </button>
    <button class="btn btn-secondary"
            (click)="clear()"
            aria-label="Limpiar Transcripción">
      Limpiar Transcripción
    </button>
  </nav>

  <section class="transcription-panel" aria-label="Panel de transcripción">
    <div class="panel-header">
      <span>📝 Transcripción en Vivo</span>
      <span class="word-count">{{ totalWords() }} palabras</span>
    </div>

    <div class="transcription-content" aria-live="polite" #transcriptionContent>
      <div *ngIf="transcription(); else waiting">
        <pre>{{ transcription() }}</pre>
      </div>
      <ng-template #waiting>
        <div class="empty-state">
          Esperando transcripción... Conecta el WebSocket y comienza a hablar.
        </div>
      </ng-template>
    </div>
  </section>

  <section class="stats-panel" aria-label="Estadísticas de la sesión">
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-number">{{ totalWords() }}</span>
        <span class="stat-label">Total Palabras</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ sessionTime() }}</span>
        <span class="stat-label">Tiempo Sesión</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ chunksProcessed() }}</span>
        <span class="stat-label">Chunks Procesados</span>
      </div>
    </div>
  </section>
</main>
