<div class="container">
  <div class="header">
    <h1>🎤 Transcripción en Tiempo Real</h1>
  </div>

  <div class="status-bar">
    <div class="status-grid">
      <div class="status-item">
        <div
          class="status-indicator"
          [class.connected]="status().websocket === 'connected'"
        ></div>
        <span class="status-text">
          {{ status().websocket === 'connected' ? 'WebSocket Conectado' : 'WebSocket Desconectado' }}
        </span>
      </div>
      <div class="status-item">
        <div
          class="status-indicator"
          [class.connected]="status().recording === 'recording'"
        ></div>
        <span class="status-text">
          {{ status().recording === 'recording' ? 'Grabando' : 'Grabación Detenida' }}
        </span>
      </div>
      <div class="status-item">
        <div
          class="status-indicator"
          [class.connected]="status().whisper === 'processing'"
        ></div>
        <span class="status-text">
          {{ status().whisper === 'processing' ? 'Whisper Procesando' : 'Whisper Inactivo' }}
        </span>
      </div>
    </div>
  </div>

  <div class="controls">
    <button class="btn btn-primary" (click)="connect()">Conectar WebSocket</button>
    <button class="btn btn-danger" (click)="disconnect()">Desconectar</button>
    <button class="btn btn-secondary" (click)="clear()">Limpiar Transcripción</button>
  </div>

  <div class="transcription-panel">
    <div class="panel-header">
      <span>📝 Transcripción en Vivo</span>
      <span class="word-count">{{ totalWords() }} palabras</span>
    </div>

    <div class="transcription-content">
      <div *ngIf="transcription(); else waiting">
        <pre>{{ transcription() }}</pre>
      </div>
      <ng-template #waiting>
        <div class="empty-state">
          Esperando transcripción... Conecta el WebSocket y comienza a hablar.
        </div>
      </ng-template>
    </div>
  </div>

  <div class="stats-panel">
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-number">{{ totalWords() }}</span>
        <span class="stat-label">Total Palabras</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ sessionTime() }}</span>
        <span class="stat-label">Tiempo Sesión</span>
      </div>
      <div class="stat-item">
        <span class="stat-number">{{ chunksProcessed() }}</span>
        <span class="stat-label">Chunks Procesados</span>
      </div>
    </div>
  </div>
</div>
